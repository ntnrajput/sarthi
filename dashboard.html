<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SARTHI - Railway Inspection Dashboard</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- AOS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>


  <!-- ‚úÖ Navbar Component -->
  <div id="navbar-container"></div>

  <!-- Main Container -->
  <div class="container-fluid py-4">
    <div class="row">
      <!-- Main Content -->
      <main id="content" class="col-12">
        <h1 class="h3 mb-4" data-aos="fade-up">Dashboard</h1>

        <div class="mb-4" data-aos="fade-up" data-aos-delay="100">
          <div class="btn-group flex-wrap" role="group" aria-label="Product Toggle Buttons">
            <input type="radio" class="btn-check" name="productToggle" id="btnERC" autocomplete="off" checked>
            <label class="btn btn-outline-primary" for="btnERC">ERC</label>

            <input type="radio" class="btn-check" name="productToggle" id="btnSleeper" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnSleeper">Sleeper</label>

            <input type="radio" class="btn-check" name="productToggle" id="btnRubberPad" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnRubberPad">Rubber Pad</label>

            <input type="radio" class="btn-check" name="productToggle" id="btnElastomeric" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnElastomeric">Elastomeric Rubber Pad</label>

            <input type="radio" class="btn-check" name="productToggle" id="btnRail" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnRail">Rail</label>
          </div>
        </div>

        <!-- KPI Cards -->
        <div class="row g-4 mb-4">
          <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="100">
            <div class="card hover-lift">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <p class="text-muted mb-1 small">Total Inspections</p>
                  <h3 class="mb-0" data-counter data-target="1247">0</h3>
                </div>
                <div class="fs-1">üìã</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
            <div class="card hover-lift">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <p class="text-muted mb-1 small">Pending Reviews</p>
                  <h3 class="mb-0" data-counter data-target="23">0</h3>
                </div>
                <div class="fs-1">‚è≥</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
            <div class="card hover-lift">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <p class="text-muted mb-1 small">Quality Score</p>
                  <h3 class="mb-0"><span data-counter data-target="94">0</span>%</h3>
                </div>
                <div class="fs-1">‚úÖ</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-lg-3" data-aos="fade-up" data-aos-delay="400">
            <div class="card hover-lift">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <p class="text-muted mb-1 small">Active Sites</p>
                  <h3 class="mb-0" data-counter data-target="8">0</h3>
                </div>
                <div class="fs-1">üèóÔ∏è</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="row g-4 mt-2">
          <div class="col-12 col-lg-8" data-aos="fade-up" data-aos-delay="600">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title mb-4">Inspection Trends</h5>
                <canvas id="trendChart" height="80"></canvas>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-4" data-aos="fade-up" data-aos-delay="700">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title mb-4">Component Status</h5>
                <canvas id="statusChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Footer -->
  <footer class="border-top py-3 mt-4 text-center small text-muted">
    ¬© SARTHI - QIMS ‚Äî v0.1
  </footer>

  <!-- JS Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <!-- App JS -->
  <script src="assets/js/app.js"></script>

  <script>
  // Page Loader
  window.addEventListener('load', () => {
    const loader = document.getElementById('pageLoader');
    setTimeout(() => {
      loader.style.opacity = '0';
      setTimeout(() => loader.style.display = 'none', 500);
    }, 1000);
  });

  // AOS Init
  AOS.init({ duration: 800, once: true });

  // ================================
  // üìä Chart Data for Each Product
  // ================================
  const chartDataSets = {
    ERC: {
      trend: [65, 78, 90, 81, 95, 102],
      status: [75, 20, 5]
    },
    Sleeper: {
      trend: [80, 85, 70, 90, 100, 110],
      status: [60, 30, 10]
    },
    'Rubber Pad': {
      trend: [45, 55, 60, 72, 68, 80],
      status: [50, 40, 10]
    },
    'Elastomeric Rubber Pad': {
      trend: [30, 42, 50, 65, 70, 77],
      status: [55, 35, 10]
    },
    Rail: {
      trend: [90, 100, 95, 110, 120, 130],
      status: [85, 10, 5]
    }
  };

  // ================================
  // üìà Initialize Charts
  // ================================
  let trendChartInstance = null;
  let statusChartInstance = null;

  function initCharts(product = 'ERC') {
    const trendCtx = document.getElementById('trendChart');
    const statusCtx = document.getElementById('statusChart');

    const productData = chartDataSets[product];

    // Trend Chart
    if (trendCtx) {
      if (trendChartInstance) trendChartInstance.destroy();
      trendChartInstance = new Chart(trendCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: `${product} Inspections`,
            data: productData.trend,
            borderColor: 'rgb(102, 126, 234)',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true } }
        }
      });
    }

    // Status Chart
    if (statusCtx) {
      if (statusChartInstance) statusChartInstance.destroy();
      statusChartInstance = new Chart(statusCtx, {
        type: 'doughnut',
        data: {
          labels: ['Approved', 'Pending', 'Rejected'],
          datasets: [{
            data: productData.status,
            backgroundColor: [
              'rgba(102, 126, 234, 0.8)',
              'rgba(255, 193, 7, 0.8)',
              'rgba(220, 53, 69, 0.8)'
            ]
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { position: 'bottom' } }
        }
      });
    }
  }

  // Initialize with ERC as default
  window.addEventListener('load', () => initCharts('ERC'));

  // ================================
  // üñ±Ô∏è Handle Product Toggle Buttons
  // ================================
  document.querySelectorAll('input[name="productToggle"]').forEach(btn => {
    btn.addEventListener('change', (e) => {
      if (e.target.checked) {
        const product = e.target.nextElementSibling.textContent.trim();
        console.log(`‚úÖ Selected Product: ${product}`);
        initCharts(product);
      }
    });
  });
</script>

</body>
</html>
