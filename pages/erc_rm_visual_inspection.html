<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SARTHI - ERC Raw Material Visual Inspection</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- AOS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link href="../assets/css/styles.css" rel="stylesheet">

  <style>
    .page-content {
      padding-bottom: 5rem; /* Prevent footer overlap */
    }
    .form-container {
      max-width: 900px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <!-- âœ… Navbar -->
  <div id="navbar-container"></div>

  <!-- ðŸ§¾ Main Content -->
  <div class="container page-content py-4">
    <div class="form-container">
      <h1 class="h3 mb-4 text-center" data-aos="fade-up">
        ERC - Raw Material Visual Inspection
      </h1>

      <div class="card shadow-sm" data-aos="fade-up" data-aos-delay="100">
        <div class="card-body p-4">

          <!-- ðŸ“Œ Section: Requirement -->
          <div class="mb-4">
            <label class="form-label fw-semibold">Requirement</label>
            <div class="alert alert-light border">
              Surface of the as rolled bars should be reasonably smooth, free from distortion, twist & kinks and shall be substantially straight.
              The bars shall be free from harmful defects namely folds, laps, cracks, deep pits, grooves, excessive scaling which may lead to cracking during hardening or impair serviceability.
              Bars shall be free from internal defects, such as piping, segregation which may impair serviceability.
            </div>
          </div>

          <!-- ðŸ“š Section: Reference -->
          <div class="mb-4">
            <label class="form-label fw-semibold">Reference</label>
            <div class="alert alert-info mb-0">
              Ref Cl. No. 4.8 of IRS T-31-2025 (Two Samples per Heat)
            </div>
          </div>

          <!-- ðŸ§ª Section: Samples -->
          <div class="mb-4">
            <label for="sampleCount" class="form-label fw-semibold">Samples to be Taken</label>
            <input type="number" class="form-control" id="sampleCount" placeholder=" Enter the no, of Samples to be inspected">
          </div>

          <!-- ðŸ‘€ Section: Observations -->
          <div id="observationsContainer" class="mb-4"></div>

          <!-- ðŸ“ Remarks -->
          <div class="mb-4">
            <label for="remarks" class="form-label fw-semibold">Remarks</label>
            <textarea class="form-control" id="remarks" rows="3" placeholder="Enter any remarks..."></textarea>
          </div>

          <!-- ðŸ’¾ Submit Button -->
          <div class="d-flex justify-content-center">
            <button type="button" class="btn btn-primary px-5" id="submitInspection">
              Submit Inspection
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ“Œ Footer -->
  <footer class="border-top py-3 mt-4 text-center small text-muted">
    Â© SARTHI - QIMS â€” v0.1
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="../assets/js/app.js"></script>
  <script>
    AOS.init({ duration: 800, once: true });

    const sampleInput = document.getElementById('sampleCount');
    const observationsContainer = document.getElementById('observationsContainer');

    // Dynamically generate observation fields
    sampleInput.addEventListener('input', () => {
      const count = parseInt(sampleInput.value) || 0;
      observationsContainer.innerHTML = '';

      for (let i = 1; i <= count; i++) {
        const div = document.createElement('div');
        div.className = 'mb-3';
        div.innerHTML = `
          <label class="form-label fw-semibold">Heat Number ${i}</label>
          <input type="text" class="form-control" placeholder="Enter Heat No." id="hn-${i}">
          <label class="form-label fw-semibold">Observation for Sample ${i}</label>
          <input type="text" class="form-control" placeholder="Visually checked â€” no such defects observed" id="observation-${i}">
        `;
        observationsContainer.appendChild(div);
      }
    });

    // Handle form submission
    document.getElementById('submitInspection').addEventListener('click', () => {
      const sampleCount = sampleInput.value;
      const remarks = document.getElementById('remarks').value;
      const observations = [];

      for (let i = 1; i <= sampleCount; i++) {
        const obs = document.getElementById(`observation-${i}`).value || '';
        observations.push(obs);
      }

      const inspectionData = {
        sampleCount,
        observations,
        remarks
      };

      console.log('âœ… Visual Inspection Data:', inspectionData);
      alert('âœ… Visual Inspection data saved successfully!');
      // Optional redirect after submit
      window.location.href = '/pages/erc_raw_material_inspection_dashboard.html';
    });
  </script>
</body>
</html>
