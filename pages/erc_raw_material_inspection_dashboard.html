<!-- /sarthi/pages/erc_raw_material_inspection_dashboard.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SARTHI - ERC Raw Material Inspection Dashboard</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

  <!-- ‚úÖ Correct relative asset path (from /pages to /assets) -->
  <link href="../assets/css/styles.css" rel="stylesheet">

  <style>
    .page-content { padding-bottom: 5rem; } /* prevent footer overlap */
    .form-container { max-width: 900px; margin: 0 auto; }
    .inspection-tile { cursor: pointer; transition: all 0.3s ease; border-radius: 12px; }
    .inspection-tile:hover {
      background-color: rgba(102, 126, 234, 0.08);
      transform: translateY(-5px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    .inspection-icon { font-size: 2rem; margin-bottom: 0.5rem; color: #667EEA; }
  </style>
</head>
<body>
  <!-- ‚úÖ Navbar (loaded by ../assets/js/app.js) -->
  <div id="navbar-container"></div>

  <div class="container page-content py-4">
    <!-- üìù Section 1: Static Information -->
    <div class="form-container mb-4">
      <h1 class="h3 mb-4 text-center" data-aos="fade-up">
        ERC - Raw Material Inspection Dashboard
      </h1>

      <div class="card shadow-sm" data-aos="fade-up" data-aos-delay="100">
        <div class="card-body p-4">
          <form id="staticInfoForm" class="row g-4">

            <!-- üè≠ Source of Raw Material -->
            <div class="col-12 col-md-6">
              <label for="sourceMaterial" class="form-label fw-semibold">Source of Raw Material</label>
              <input type="text" class="form-control" id="sourceMaterial" placeholder="Name of Steel Manufacturer" required>
            </div>

            <!-- üìÖ Date(s) of Receipt -->
            <div class="col-12 col-md-6">
              <label for="materialDate" class="form-label fw-semibold">Date(s) of Receipt</label>
              <div class="input-group">
                <input type="date" class="form-control" id="materialDate">
                <button class="btn btn-outline-primary" type="button" id="addDateBtn">+</button>
              </div>
              <ul id="dateList" class="mt-2 list-unstyled small text-muted"></ul>
            </div>

            <!-- üìú Certificate Number (replaces TC No.) -->
            <div class="col-12 col-md-6">
              <label for="certificateNumber" class="form-label fw-semibold">Certificate Number</label>
              <input type="text" class="form-control" id="certificateNumber" placeholder="XT/13/45" required>
            </div>

            <!-- üî• Cast / Heat Number (multiple) -->
            <div class="col-12 col-md-6">
              <label for="heatNumber" class="form-label fw-semibold">Cast / Heat Number</label>
              <div class="input-group">
                <input type="text" class="form-control" id="heatNumber" placeholder="e.g., 10756">
                <button class="btn btn-outline-primary" type="button" id="addHeatBtn">+</button>
              </div>
              <ul id="heatList" class="mt-2 list-unstyled small text-muted"></ul>
            </div>

            <!-- üì¶ No. of Bundles -->
            <div class="col-12 col-md-6">
              <label for="bundleCount" class="form-label fw-semibold">No. of Bundles</label>
              <input type="number" class="form-control" id="bundleCount" placeholder="35" required>
            </div>

            <!-- üî• Total No. of Heats -->
            <div class="col-12 col-md-6">
              <label for="heatCount" class="form-label fw-semibold">Total No. of Heats</label>
              <input type="number" class="form-control" id="heatCount" placeholder="2" required>
            </div>

            <!-- üè∑Ô∏è Color Code -->
            <div class="col-12 col-md-6">
              <label for="colorCode" class="form-label fw-semibold">Color Code</label>
              <input type="text" class="form-control" id="colorCode" placeholder="e.g., Blue-White">
            </div>

            <!-- ‚öñÔ∏è Quantity in MT (Replaces Tonnage) -->
            <div class="col-12 col-md-6">
              <label for="quantityMT" class="form-label fw-semibold">Quantity (MT)</label>
              <input type="number" class="form-control" id="quantityMT" placeholder="400" required>
            </div>

          </form>
        </div>
      </div>
    </div>

    <!-- üß≠ Section 2: Tiles -->
    <div class="row g-4 justify-content-center" data-aos="fade-up" data-aos-delay="200" style="max-width: 900px; margin: 0 auto;">
      <div class="col-6 col-md-4 col-lg-3">
        <div class="card inspection-tile text-center p-3" onclick="goTo('erc_rm_visual_inspection.html')">
          <div class="inspection-icon">üëÅÔ∏è</div>
          <h6 class="mb-0">Visual Inspection</h6>
        </div>
      </div>
      <div class="col-6 col-md-4 col-lg-3">
        <div class="card inspection-tile text-center p-3" onclick="goTo('erc_rm_material_testing.html')">
          <div class="inspection-icon">üß™</div>
          <h6 class="mb-0">Material Testing</h6>
        </div>
      </div>
           
      <!-- <div class="col-6 col-md-4 col-lg-3">
        <div class="card inspection-tile text-center p-3" onclick="goTo('erc_marking.html')">
          <div class="inspection-icon">‚úçÔ∏è</div>
          <h6 class="mb-0">Marking</h6>
        </div>
      </div> -->
    </div>

    <!-- üßæ Section 3: Result of Raw Material Inspection -->
    <div class="form-container mt-5" data-aos="fade-up" data-aos-delay="250">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="row g-4">
            <div class="col-12 col-md-6">
              <label for="lotAccepted" class="form-label fw-semibold">Material Lot Accepted</label>
              <input type="number" class="form-control" id="lotAccepted" placeholder="2">
            </div>
            <div class="col-12 col-md-6">
              <label for="lotRejected" class="form-label fw-semibold">Material Lot Rejected</label>
              <input type="number" class="form-control" id="lotRejected" placeholder="0">
            </div>
            <div class="col-12 col-md-6">
              <label for="rejectionReason" class="form-label fw-semibold">Reason of Rejection</label>
              <select id="rejectionReason" class="form-select">
                <option value="" selected disabled>Select Reason</option>
                <option value="Visual">Visual</option>
                <option value="Chemical">Chemical</option>
                <option value="Inclusion">Inclusion</option>
                <option value="Grain">Grain Size</option>
                <option value="Decarb">Decarb Depth</option>
                <option value="Dimension">Dimension</option>
                <option value="Hardness">Hardness</option>
                <option value="Marking">Marking</option>
              </select>
            </div>
            <div class="col-12 col-md-6">
              <label for="subRejection" class="form-label fw-semibold">Sub Reason of Rejection</label>
              <select id="subRejection" class="form-select">
                <option value="" selected disabled>Select Sub Reason</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- üìù Remarks & End Button -->
    <div class="form-container mt-4" data-aos="fade-up" data-aos-delay="300">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="mb-3">
            <label for="remarks" class="form-label fw-semibold">Remarks</label>
            <textarea class="form-control" id="remarks" rows="3" placeholder="Enter any inspection remarks..."></textarea>
          </div>
          <div class="d-flex justify-content-center">
            <button type="button" class="btn btn-danger px-5" id="endInspectionBtn">
              End Inspection
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- üìå Footer -->
  <footer class="border-top py-3 mt-4 text-center small text-muted">
    ¬© SARTHI - QIMS ‚Äî v0.1
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

  <!-- ‚úÖ Correct relative path to app.js (from /pages) -->
  <script src="../assets/js/app.js"></script>

  <script>
    AOS.init({ duration: 800, once: true });

    // ‚úÖ Stay inside the same /sarthi/pages folder
    function goTo(page) {
      // Use a RELATIVE link (no leading slash)
      window.location.href = page;
    }

    // üìÖ Add multiple dates
    const addDateBtn = document.getElementById('addDateBtn');
    const dateList = document.getElementById('dateList');
    const materialDate = document.getElementById('materialDate');

    addDateBtn.addEventListener('click', () => {
      if (materialDate.value) {
        const li = document.createElement('li');
        li.textContent = materialDate.value;
        dateList.appendChild(li);
        materialDate.value = '';
      }
    });

    // üî• Add multiple heat numbers
    const addHeatBtn = document.getElementById('addHeatBtn');
    const heatNumber = document.getElementById('heatNumber');
    const heatList = document.getElementById('heatList');

    addHeatBtn.addEventListener('click', () => {
      if (heatNumber.value.trim() !== '') {
        const li = document.createElement('li');
        li.textContent = heatNumber.value.trim();
        heatList.appendChild(li);
        heatNumber.value = '';
      }
    });

    // üß† Sub Reason Mapping
    const subReasonOptions = {
      'Visual': ['Surface cracks', 'Rust', 'Bending', 'Improper marking'],
      'Chemical': ['C% out of range', 'Mn% deviation', 'P/S beyond limit'],
      'Inclusion': ['A/B inclusion high', 'C inclusion', 'Total inclusion high'],
      'Grain': ['Grain size too coarse', 'Non-uniform grain', 'Abnormal grain growth'],
      'Decarb': ['Excess decarb layer', 'Uneven decarb depth', 'Above tolerance'],
      'Dimension': ['Length out of tolerance', 'Width deviation', 'Warping'],
      'Hardness': ['Below minimum', 'Above maximum', 'Inconsistent readings'],
      'Marking': ['Missing marking', 'Illegible marking', 'Incorrect format']
    };

    const reasonSelect = document.getElementById('rejectionReason');
    const subReasonSelect = document.getElementById('subRejection');

    reasonSelect.addEventListener('change', () => {
      const selectedReason = reasonSelect.value;
      subReasonSelect.innerHTML = '<option value="" selected disabled>Select Sub Reason</option>';
      if (subReasonOptions[selectedReason]) {
        subReasonOptions[selectedReason].forEach(sub => {
          const option = document.createElement('option');
          option.value = sub;
          option.textContent = sub;
          subReasonSelect.appendChild(option);
        });
      }
    });

    // üõë End Inspection (back to the inspection form inside the SAME folder)
    document.getElementById('endInspectionBtn').addEventListener('click', () => {
      if (confirm('Are you sure you want to end this inspection?')) {
        // relative URL keeps us at /sarthi/pages/inspection.html
        window.location.href = 'inspection.html';
      }
    });
  </script>
</body>
</html>